!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.Poj2ProductSection=t(require("react")):e.Poj2ProductSection=t(e.React)}(this,e=>(()=>{"use strict";var t={12:t=>{t.exports=e}},a={};function s(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};s.d(n,{default:()=>v});var o=s(12),l=s.n(o);const c=[{id:1,companyId:21,config:{main_image:"https://picsum.photos/400/400?random=1",img_url:"https://picsum.photos/400/400?random=1",default_price:15e4,discounted_price:105e3,stock_count:50,generate_pv:210},title:"í”„ë¦¬ë¯¸ì—„ ë¬´ì„  ì´ì–´í°",description:"ê³ í’ˆì§ˆ ë¬´ì„  ì´ì–´í°",categoryId:1,additionalImages:["https://picsum.photos/400/400?random=1","https://picsum.photos/400/400?random=2","https://picsum.photos/400/400?random=3"],hasOptions:!1,createdAt:"2024-01-01T00:00:00.000Z",brand:"TechBrand",purchases:523,flags:["delivery","weekend"],benefits:[{type:"coupon",value:"10% ì¶”ê°€í• ì¸"},{type:"card",value:"5% ì²­êµ¬í• ì¸"}],likes:234},{id:2,companyId:21,config:{main_image:"https://picsum.photos/400/400?random=4",img_url:"https://picsum.photos/400/400?random=4",default_price:27e3,discounted_price:27e3,stock_count:30,generate_pv:420},title:"ìŠ¤ë§¥ìŠ¤ ì½”ë¦¬ì•„ ì´ˆë³´ìž ë ˆì €ìš© ë¼ì¼“",description:"ìŠ¤ë§¥ìŠ¤ ì½”ë¦¬ì•„ ì´ˆë³´ìžìš© ë°°ë“œë¯¼í„´ ë¼ì¼“",categoryId:2,additionalImages:["https://picsum.photos/400/400?random=4","https://picsum.photos/400/400?random=5","https://picsum.photos/400/400?random=6","https://picsum.photos/400/400?random=7"],hasOptions:!0,createdAt:"2024-01-02T00:00:00.000Z",brand:"ìŠ¤ë§¥ìŠ¤ ì½”ë¦¬ì•„",purchases:892,flags:["broadcast","delivery"],benefits:[{type:"coupon",value:"15% í• ì¸ì¿ í°"}],likes:567},{id:3,companyId:21,config:{main_image:"https://picsum.photos/400/400?random=5",img_url:"https://picsum.photos/400/400?random=5",default_price:45e4,discounted_price:292500,stock_count:10,generate_pv:585},title:"ê³ ê¸‰ ì»¤í”¼ë¨¸ì‹ ",description:"í”„ë¡œíŽ˜ì…”ë„ ì»¤í”¼ë¨¸ì‹ ",categoryId:3,additionalImages:["https://picsum.photos/400/400?random=5","https://picsum.photos/400/400?random=6"],hasOptions:!1,createdAt:"2024-01-03T00:00:00.000Z",brand:"CafeExpert",purchases:234,flags:["delivery"],benefits:[{type:"card",value:"12ê°œì›” ë¬´ì´ìž"}],likes:123},{id:4,companyId:21,config:{main_image:"https://picsum.photos/400/400?random=7",img_url:"https://picsum.photos/400/400?random=7",default_price:58e4,discounted_price:348e3,stock_count:20,generate_pv:696},title:"í”„ë¦¬ë¯¸ì—„ ê³µê¸°ì²­ì •ê¸°",description:"ëŒ€ìš©ëŸ‰ ê³µê¸°ì²­ì •ê¸°",categoryId:4,additionalImages:["https://picsum.photos/400/400?random=7"],hasOptions:!0,createdAt:"2024-01-04T00:00:00.000Z",brand:"CleanAir",purchases:456,flags:["broadcast","delivery","weekend"],benefits:[{type:"coupon",value:"20% ì¶”ê°€í• ì¸"},{type:"card",value:"6ê°œì›” ë¬´ì´ìž"}],likes:789}],i=({src:e,alt:t=""})=>{const[a,s]=l().useState(!0);return l().createElement("div",{className:"poj2-image-box relative overflow-hidden w-full h-full bg-gray-100"},a&&l().createElement("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),l().createElement("img",{src:e,alt:t,className:"w-full h-full object-cover transition-transform duration-300 ease-out hover:scale-105 "+(a?"opacity-0":"opacity-100"),onLoad:()=>s(!1),loading:"lazy"}))},r=({tailwind:e})=>l().createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},l().createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})),d=({children:e})=>l().createElement("div",{className:"relative h-full overflow-hidden"},e);function m({product:e,data:t,actions:a,activeRollingText:s=!0}){const n=(()=>{const t=[],a=e.image||e.config?.main_image||e.config?.img_url;if(a&&t.push(a),e.imageTwo&&e.imageTwo!==a&&t.push(e.imageTwo),e.additionalImages&&e.additionalImages.length>0&&e.additionalImages.forEach(e=>{e&&!t.includes(e)&&t.push(e)}),e.description&&t.length<3){const a=/<img[^>]*src=['""]([^'""]*)['""][^>]*>/g;let s;for(;null!==(s=a.exec(e.description))&&t.length<3;){const e=s[1];e&&!t.includes(e)&&t.push(e)}}const s=t.slice(0,3);return console.log(`Product ${e.id} (${e.title}) ì¸ë„¤ì¼ ì¶”ì¶œ:`,{mainImage:a,imageTwo:e.imageTwo,additionalImages:e.additionalImages,extractedFromDescription:e.description?.match(/<img[^>]*src=['""]([^'""]*)['""][^>]*>/g)||[],finalThumbnails:s,count:s.length}),s.length>0?s:["https://via.placeholder.com/400"]})(),o=e.title||e.name||"",c=e.brand,i=e.config?.discounted_price||e.config?.default_price||e.price,m=e.config?.default_price||e.originalPrice,f=(e.discount||m&&i&&Math.round(100*(1-i/m)),e.purchases,e.flags),v=e.benefits,x=e.likes;return l().createElement("div",{className:"poj2-product-card cursor-pointer",onClick:()=>a.handleProductClick(e)},l().createElement("div",{className:"poj2-product-card-thumb relative"},l().createElement(p,{title:o,brand:c,thumbnails:n,tagImage:void 0}),s&&x&&l().createElement("div",{className:"absolute left-0 bottom-0 flex items-center w-full h-8 lg:h-10 px-4 lg:px-5 bg-black/50"},l().createElement(d,null,l().createElement("div",{className:"absolute flex items-center gap-1 lg:gap-2"},l().createElement(r,{tailwind:"w-4 h-4 lg:w-6 lg:h-6 fill-white"}),l().createElement("p",{className:"text-white text-sm lg:text-base"},x,"ëª…ì´ ì°œí•œ ìƒí’ˆì´ì—ìš”"))))),l().createElement("div",{className:"poj2-product-card-info pt-3"},l().createElement(u,{product:e,brand:c,title:o})),f&&f.length>0&&l().createElement("div",{className:"poj2-product-card-flags lg:pt-1"},l().createElement(g,{flags:f})),v&&v.length>0&&l().createElement("div",{className:"poj2-product-card-benefits pt-2"},l().createElement(h,{benefits:v})))}function p({title:e,brand:t,thumbnails:a,tagImage:s}){return l().createElement("div",{className:"overflow-hidden relative grid grid-cols-3 gap-1 aspect-[16/10]"},1===a.length&&l().createElement("div",{className:"col-span-2 row-span-2"},l().createElement(i,{src:a[0],alt:`${t||""} ${e}`})),a.length>1&&a.slice(0,3).map((a,s)=>l().createElement("div",{className:0===s?"col-span-2 row-span-2":"col-span-1 row-span-1",key:s},l().createElement(i,{src:a,alt:`${t||""} ${e}`}))),s&&l().createElement("span",{className:"absolute top-0 left-0 block"},l().createElement("img",{src:s,alt:"",className:"w-20 h-20"})),a.length>3&&l().createElement("div",{className:"absolute bottom-0 right-0 bg-black/70 text-white text-xs px-2 py-1"},"+",a.length-3))}function u({product:e,brand:t,title:a}){const s=e.price,n=e.originalPrice,o=e.hasLevelPrice||n&&n>s,c=o&&n?Math.round(100*(1-s/n)):e.discount,i=e.purchases;return l().createElement("div",null,l().createElement("h3",{className:"text-sm lg:text-lg leading-sm"},t&&l().createElement("span",{className:"pr-1 font-bold"},t),a),l().createElement("div",{className:"my-1"},o&&n&&l().createElement("p",{className:"text-sm text-description line-through"},n.toLocaleString(),"ì›"),l().createElement("div",{className:"flex items-end justify-between"},l().createElement("div",{className:"flex items-center gap-1 lg:gap-2"},c&&l().createElement("p",{className:"text-lg lg:text-xl font-bold text-discount"},c,"%"),l().createElement("p",null,l().createElement("span",{className:"text-lg lg:text-xl font-bold"},s.toLocaleString()),l().createElement("span",null,"ì›"))),i&&l().createElement("p",{className:"text-xs text-description"},i.toLocaleString()," êµ¬ë§¤")),e.hasLevelPrice&&e.levelName&&l().createElement("p",{className:"text-xs text-blue-600 mt-1"},e.levelName),e.pv>0&&l().createElement("p",{className:"text-xs text-gray-600 mt-1"},"PV: ",e.pv)))}function g({flags:e}){return l().createElement("div",{className:"flex items-center flex-wrap gap-x-1.5 gap-y-1 sm:gap-x-2"},e.map(e=>{switch(e){case"broadcast":return l().createElement("span",{key:e,className:"text-xs font-bold"},"ë°©ì†¡ìƒí’ˆ");case"delivery":return l().createElement("span",{key:e,className:"text-xs"},"ë¬´ë£Œë°°ì†¡");case"weekend":return l().createElement("span",{key:e,className:"text-xs"},"ì£¼ë§ë°°ì†¡");default:return null}}))}function h({benefits:e}){return l().createElement("div",{className:"flex items-center flex-wrap gap-1"},e.map((e,t)=>l().createElement("p",{key:t,className:"flex items-center gap-1 border border-border rounded px-1.5 text-xs"},l().createElement("span",null,"coupon"===e.type?"ðŸŽŸï¸":"ðŸ’³"),l().createElement("span",null,e.value))))}function f(e={}){if(console.log("ProductSection - ì „ë‹¬ë°›ì€ props:",{hasData:!!e.data,hasActions:!!e.actions,dataProducts:e.data?.products,initialProducts:e.initialProducts,productsLength:(e.data?.products||e.initialProducts||c).length}),e.data?.products){const t=e.data.products.find(e=>e.title?.includes("ìŠ¤ë§¥ìŠ¤ ì½”ë¦¬ì•„"));t&&(console.log("ìŠ¤ë§¥ìŠ¤ ì½”ë¦¬ì•„ ìƒí’ˆ ì „ì²´ êµ¬ì¡°:",t),console.log("ìŠ¤ë§¥ìŠ¤ ì½”ë¦¬ì•„ ìƒí’ˆ í‚¤ë“¤:",Object.keys(t)))}const t=!!e.data,a=!!e.actions,s=e.data?.products||e.initialProducts||c,n=(e.mode,(0,o.useRef)(null)),[i,r]=(0,o.useState)(1),[d,p]=(0,o.useState)(""),[u,g]=(0,o.useState)(null),[h,f]=(0,o.useState)("created"),[v,x]=(0,o.useState)("desc"),[b,E]=(0,o.useState)(!1),[y,w]=(0,o.useState)(!1),[N,P]=(0,o.useState)(!1),[_,k]=(0,o.useState)([]),[S,I]=(0,o.useState)(1);(0,o.useEffect)(()=>{const e=()=>{P(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{N&&s.length>0&&k(s.slice(0,8))},[N,s]);const j=t?e.data:{products:s,loading:b,currentPage:i,totalPages:Math.ceil(s.length/8),totalProducts:s.length,selectedCategory:u,searchQuery:d,sortBy:h,sortOrder:v,isUserLoggedIn:!0,isAdminMode:!1,itemsPerRow:2,showStock:!0,theme:{},isMobile:N,mobileProducts:_,mobilePage:S,isLoadingMore:y,loadMoreButtonRef:n},T=a?e.actions:{handleAddToCart:async t=>{console.log("ìž¥ë°”êµ¬ë‹ˆì— ì¶”ê°€:",t.name),t.hasOptions?e.utils?.navigate?e.utils.navigate(`/product/${t.id}`):console.log("ìƒí’ˆ ìƒì„¸íŽ˜ì´ì§€ë¡œ ì´ë™:",t.id):alert(`${t.name}ì´(ê°€) ìž¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`)},handleCategoryChange:e=>{g(e)},handleSearch:e=>{p(e)},handleSortChange:(e,t)=>{f(e),x(t)},handlePageChange:e=>{r(e),N||window.scrollTo({top:0,behavior:"smooth"})},handleLoadMore:async()=>{N&&S<j.totalPages&&(w(!0),setTimeout(()=>{const e=8*S,t=e+8,a=s.slice(e,t);k(e=>[...e,...a]),I(e=>e+1),w(!1)},1e3))},handleProductClick:t=>{N&&sessionStorage.setItem("productListState",JSON.stringify({mobileProducts:j.mobileProducts,mobilePage:j.mobilePage,scrollPosition:window.scrollY,totalPages:j.totalPages})),e.utils?.navigate?e.utils.navigate(`/product/${t.id}`):console.log("ìƒí’ˆ ìƒì„¸íŽ˜ì´ì§€ë¡œ ì´ë™:",t.id)}};if((0,o.useEffect)(()=>{if("undefined"!=typeof window&&!document.querySelector('script[src*="cdn.tailwindcss.com"]')){const e=document.createElement("script");e.src="https://cdn.tailwindcss.com",e.async=!1,document.head.appendChild(e),e.onload=()=>{window.tailwind&&(window.tailwind.config={corePlugins:{preflight:!1}})}}},[]),j.loading)return l().createElement("div",{className:"flex justify-center items-center py-20"},l().createElement("div",{className:"text-lg"},"ìƒí’ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."));const C=s;return l().createElement("div",{className:`pb-15 lg:pb-30 ${e.className||""}`,style:e.style},l().createElement("style",null,"\n                .poj2-product-card {\n                    contain: layout;\n                }\n                .poj2-product-card-thumb {\n                    position: relative;\n                    background: #f3f4f6;\n                }\n                .poj2-image-box img {\n                    will-change: transform;\n                }\n            "),l().createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 sm:gap-x-5 gap-y-8 lg:gap-y-10"},C.map(e=>l().createElement(m,{key:e.id,product:e,data:j,actions:T,activeRollingText:!0}))))}const v=e=>{if(e.data&&e.actions&&e.utils)return l().createElement(f,e);{const t={initialProducts:e.products||e.initialProducts,className:e.className,style:e.style,options:e.options,mode:e.mode||"production"};return l().createElement(f,t)}};return n=n.default})());